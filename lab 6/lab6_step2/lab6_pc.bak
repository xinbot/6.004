.subckt pc clk reset pcsel[2:0] jt[31:0] offset[31:0] ia[31:0] pc_next[31:0]
*XAdr (vdd 0#27 vdd 0#3)
*IllOp (vdd 0#28 vdd 0#2)
*Xint pcsel2#32 pc_next[31:0] vdd 0#27 vdd 0#3 e[31:0] mux2
*Xynt pcsel1#32 pcsel0#32 e[31:0] jt[31:0] offset[31:0] vdd 0#28 vdd 0#2 ia_next[31:0] mux4

Xmu pcsel[2:0]#32 pc_next[31:0] vdd 0#27 vdd 0#3 jt[31:0] offset[31:0] vdd 0#28 vdd 0#2 ia_next[31:0] mux5

*on reset=1 pc=>0x800000
Xpcn reset#32 ia_next[31:0] vdd 0#31 a[31:0] mux2

*calculate pc
Xpc a[31:0] clk#32 ia[31:0] dreg

*add four to pc
Xpc_add 0 ia[31:0] 0#29 vdd 0#2 pc_next[31:0] pc_z pc_v pc_n adder32
.ends

.subckt mux5 s2 s1 s0 A B C D E out
Xmuxa s2 A B i mux2
Xmuxb s0 s1 i C D E out mux4
.ends